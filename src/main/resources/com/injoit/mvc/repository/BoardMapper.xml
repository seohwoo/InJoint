<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.injoit.mvc.repository.BoardMapper">
	<select id="getAppNum">
		select EMP_APPROVAL_SEQ.nextval from dual
	</select>
	<select id="getAppContent">
		select * from emp_approval where no=#{num}
	</select>
	<insert id="ApvalReg" parameterType="com.injoit.mvc.bean.EmpApprovalDTO">
		insert into emp_approval(no,title,writer,content) values(
		#{no},
		#{title},
		#{writer},
		#{content}
		)
		
	</insert>
	<select id="ApvalList" resultType="com.injoit.mvc.bean.EmpApprovalDTO">
		select * from emp_approval
	</select>
	<update id="ApvalUpdate" parameterType="com.injoit.mvc.bean.EmpApprovalDTO">
		update emp_approval set title=#{title},writer=#{writer},content=#{content},reg=sysdate where no=#{no}
	</update>
	<insert id="ApvalFileReg" parameterType="com.injoit.mvc.bean.BoardFileDTO">
		insert into boardfile values(
		boardfile_seq.nextval,
		#{ref},
		#{filename},
		2
		)
	</insert>
	<delete id="deleteFileName">
		delete from boardfile where filename=#{filename}
	</delete>
	<delete id="deleteFileAll">
		delete from boardfile where ref=#{num}
	</delete>
	<delete id="ApvalDelete">
		delete from emp_approval where no=#{num}
	</delete>
</mapper>